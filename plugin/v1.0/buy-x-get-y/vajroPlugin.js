var vajroPlugin;(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{getBuyXGetY:()=>a});var r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},r.apply(this,arguments)},n=function(t){return t.reduce((function(t,e){return t[e.variantId]=e,t}),{})},u=function(t,e,r){var n=[];return"include"===r?Object.keys(t).forEach((function(r){e[r]&&n.push(t[r])})):"exclude"===r&&Object.keys(t).forEach((function(r){e[r]||n.push(t[r])})),n},o=function(t){var e=t.lineItems,r=t.includeProducts,o=t.excludeProducts,i=n(r),c=n(o),a=0!==Object.keys(i).length?u(e,i,"include"):[],f=0!==Object.keys(c).length?u(e,c,"exclude"):[],d=a.length?a:f,l=n(d);return 0!==d.length?l:e},i=function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},i.apply(this,arguments)},c=function(){return c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},c.apply(this,arguments)},a=function(t,e){var u,a,f,d=t.cartLineItems,l=(void 0===d?{}:d).lineItems,s=(u=e,f=function(t){return t.filter((function(t){return"READONLY"===t.lineItemType}))}(a=void 0===l?[]:l)||[],a=function(t,e){var r=t.map((function(t){return t.variantId}));return e=n(e),r.forEach((function(t){var r=e[t]||{},n=r.lineItemType;r.variantId===t&&"READONLY"===n&&delete e[t]})),e}(u.getOfferConfig.getProducts,a),r(r({},u),{lineItems:a,getRemovedProductList:f})),g=function(t){switch(t.buyOfferType){case"threshold":return function(t){var e=t.getRemovedProductList,r=function(t){for(var e=t.getOfferType,r=t.getOfferConfig,n=r.discount,u=r.threshold,i=r.buyProducts,a=r.getProducts,f=r.getProductQuantity,d=i.map((function(t){return t.variantId})),l=o(t),s=!1,g=0,p=0,y=d;p<y.length;p++){var v=l[y[p]]||{},P=v.quantity,O=v.unitPrice;if(!P||!O){s=!1;break}g+=P*O,s=!0}return s&&u<=g?a.map((function(t){var r=t.unitPrice,u=0;return"product"!==e&&("percentage"===e&&n>=100&&(n=100),u="percentage"===e?f*r-f*r*(n/100):f*r-n),c(c({},t),{quantity:f,unitPrice:u})})):[]}(t);return{getSplitDiscount:r,getRemovedProductList:e}}(t);case"collection":break;case"product":default:return{};case"quantity":return function(t){var e=t.getRemovedProductList,r=function(t){for(var e=t.getOfferType,r=t.getOfferConfig,n=r.buyProducts,u=r.buyProductQuantity,c=r.getProducts,a=r.getProductQuantity,f=r.discount,d=n.map((function(t){return t.variantId})),l=o(t),s=!1,g=0,p=d;g<p.length;g++){var y=p[g],v=(l[y]||{}).quantity;if(!(l[y]&&u<=v)){s=!1;break}s=!0}return s?c.map((function(t){var r=t.unitPrice,n=0;return"product"!==e&&("percentage"===e&&f>=100&&(f=100),n="percentage"===e?a*r-a*r*(f/100):a*r-f),i(i({},t),{quantity:a,unitPrice:n})})):[]}(t);return{getSplitDiscount:r,getRemovedProductList:e}}(t)}return{}}(s);return JSON.stringify(g)};vajroPlugin=e})();
//# sourceMappingURL=vajroPlugin.js.map