var vajroPlugin;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{getBuyXGetY:()=>o});var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=function(e){return e.reduce((function(e,t){var r,i=t.variantId;return n(n({},e),((r={})[i]=t,r))}),{})},i=function(e,t,n){var r=[];return"include"===n?Object.keys(e).forEach((function(n){t[n]&&r.push(e[n])})):"exclude"===n&&Object.keys(e).forEach((function(n){t[n]||r.push(e[n])})),r},u=function(e){var t=e.getOfferConfig,n=e.getOfferType,u=function(e){var t=function(e){return e.reduce((function(e,t){return e[t.variantId]=t,e}),{})}(e.lineItems),n=r(e.includeProducts),u=r(e.excludeProducts),c=0!==Object.keys(n).length?i(t,n,"include"):[],o=0!==Object.keys(u).length?i(t,u,"exclude"):[];e.includedProductLineItem=0!==c.length?c:void 0,e.excludedProductLineItem=0===c.length&&0!==o.length?o:void 0;var l=c.length?c:o,a=0!==l.length?l:e.lineItems,f=0;return a.forEach((function(e){var t=e.unitPrice,n=e.quantity;f+=t*n})),f}(e),c=function(e,t){var n=(e=e.sort((function(e,t){return e.threshold-t.threshold}))).reduce((function(e,n){return n.threshold<=Math.round(t)?e<n?e:n:e}),0);return 0!==n?n:[]}(t,u),o="product"===n?function(e){return e.lineItems.filter((function(e){return 0!==e.unitPrice}))}(e):void 0;return e.lineItems=o?e.lineItems=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,u=t.length;i<u;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],o,!0):e.lineItems,0!==c.length?function(e,t,n){var r=e.includedProductLineItem,i=e.excludedProductLineItem,u=e.lineItems,c=e.getOfferType,o=t.discount,l=t.getProducts,a=r||i||u;return"percentage"===c?(o>=100&&(o=100),a.forEach((function(e){return e.unitPrice=e.unitPrice-e.unitPrice*(o/100)}))):"amount"===c?o>=n?a.forEach((function(e){return e.unitPrice=0*e.unitPrice})):a.forEach((function(e){return e.unitPrice=e.unitPrice*(1-o/n*100/100)})):"product"===c&&(a=l),a}(e,c,u):[]},c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},o=function(e,t){var r=e.cartLineItems,i=(void 0===r?{}:r).lineItems,o=void 0===i?{}:i;o=function(e){return e.map((function(e){var t=e.originalUnitPrice;return 0===e.unitPrice?n(n({},e),{unitPrice:t}):e}))}(o);var l=function(e){switch(e.buyOfferType){case"threshold":return u(e);case"collection":break;default:return[]}return[]}(c(c({},t),{lineItems:o}));return JSON.stringify(l)};vajroPlugin=t})();
//# sourceMappingURL=vajroPlugin.js.map