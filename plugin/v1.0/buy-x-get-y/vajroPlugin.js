var vajroPlugin;(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{getBuyXGetY:()=>f});var r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},r.apply(this,arguments)},n=function(t){return t.reduce((function(t,e){var n,u=e.variantId;return r(r({},t),((n={})[u]=e,n))}),{})},u=function(t){return t.reduce((function(t,e){return t[e.variantId]=e,t}),{})},i=function(t,e,r){var n=[];return"include"===r?Object.keys(t).forEach((function(r){e[r]&&n.push(t[r])})):"exclude"===r&&Object.keys(t).forEach((function(r){e[r]||n.push(t[r])})),n},o=function(t){var e=t.lineItems,r=t.includeProducts,u=t.excludeProducts,o=n(r),c=n(u),a=0!==Object.keys(o).length?i(e,o,"include"):[],f=0!==Object.keys(c).length?i(e,c,"exclude"):[];t.includedProductLineItem=0!==a.length?a:void 0,t.excludedProductLineItem=0===a.length&&0!==f.length?f:void 0;var d=a.length?a:f;return 0!==d.length?d:t.lineItems},c=function(){return c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},c.apply(this,arguments)},a=function(){return a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},a.apply(this,arguments)},f=function(t,e){var n,i,f,d=t.cartLineItems,l=(void 0===d?{}:d).lineItems,s=(n=e,f=function(t){return t.filter((function(t){return"READONLY"===t.lineItemType}))}(i=void 0===l?[]:l)||[],i=function(t,e){var r=t.map((function(t){return t.variantId}));return e=u(e),r.forEach((function(t){var r=e[t]||{},n=r.lineItemType;r.variantId===t&&"READONLY"===n&&delete e[t]})),e}(n.getOfferConfig.getProducts,i),r(r({},n),{lineItems:i,getRemovedProductList:f})),g=function(t){switch(t.buyOfferType){case"threshold":return function(t){var e=t.getRemovedProductList,r=function(t){for(var e=t.getOfferType,r=t.getOfferConfig,n=r.discount,u=r.threshold,i=r.buyProducts,c=r.getProducts,f=r.getProductQuantity,d=i.map((function(t){return t.variantId})),l=o(t),s=!1,g=0,v=0,p=d;v<p.length;v++){var y=l[p[v]]||{},P=y.quantity,h=y.unitPrice;if(!P||!h){s=!1;break}g+=P*h,s=!0}return s&&u<=g?c.map((function(t){var r=t.unitPrice,u=0;return"product"!==e&&("percentage"===e&&n>=100&&(n=100),u="percentage"===e?f*r-f*r*(n/100):f*r-n),a(a({},t),{quantity:f,unitPrice:u})})):[]}(t);return{getSplitDiscount:r,getRemovedProductList:e}}(t);case"collection":break;case"product":default:return{};case"quantity":return function(t){var e=t.getRemovedProductList,r=function(t){for(var e=t.getOfferType,r=t.getOfferConfig,n=r.buyProducts,u=r.buyProductQuantity,i=r.getProducts,a=r.getProductQuantity,f=r.discount,d=n.map((function(t){return t.variantId})),l=o(t),s=!1,g=0,v=d;g<v.length;g++){var p=v[g],y=(l[p]||{}).quantity;if(!(l[p]&&u<=y)){s=!1;break}s=!0}return s?i.map((function(t){var r=t.unitPrice,n=0;return"product"!==e&&("percentage"===e&&f>=100&&(f=100),n="percentage"===e?a*r-a*r*(f/100):a*r-f),c(c({},t),{quantity:a,unitPrice:n})})):[]}(t);return{getSplitDiscount:r,getRemovedProductList:e}}(t)}return{}}(s);return JSON.stringify(g)};vajroPlugin=e})();
//# sourceMappingURL=vajroPlugin.js.map