var vajroPlugin;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{getBuyXGetY:()=>o});var r=function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},n=function(e){return e.reduce((function(e,t){var n,i=t.variantId;return r(r({},e),((n={})[i]=t,n))}),{})},i=function(e,t,r){var n=[];return"include"===r?Object.keys(e).forEach((function(r){t[r]&&n.push(e[r])})):"exclude"===r&&Object.keys(e).forEach((function(r){t[r]||n.push(e[r])})),n},u=function(e){var t=e.getOfferConfig,r=e.getOfferType,u=function(e){var t=function(e){return e.reduce((function(e,t){return e[t.variantId]=t,e}),{})}(e.lineItems),r=n(e.includeProducts),u=n(e.excludeProducts),c=0!==Object.keys(r).length?i(t,r,"include"):[],o=0!==Object.keys(u).length?i(t,u,"exclude"):[];e.includedProductLineItem=0!==c.length?c:void 0,e.excludedProductLineItem=0===c.length&&0!==o.length?o:void 0;var a=c.length?c:o,l=0!==a.length?a:e.lineItems,f=0;return l.forEach((function(e){var t=e.unitPrice,r=e.quantity;f+=t*r})),f}(e),c=function(e,t){var r=(e=e.sort((function(e,t){return e.threshold-t.threshold}))).reduce((function(e,r){return r.threshold<=Math.round(t)?e<r?e:r:e}),0);return 0!==r?r:[]}(t,u),o="product"===r?function(e){return e.lineItems.filter((function(e){var t=e.originalUnitPrice,r=e.unitPrice;return 0!==t||0!==r}))}(e):void 0;return e.lineItems=o?e.lineItems=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,u=t.length;i<u;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([],o,!0):e.lineItems,0!==c.length?function(e,t,r){var n=e.includedProductLineItem,i=e.excludedProductLineItem,u=e.lineItems,c=e.getOfferType,o=t.discount,a=t.getProducts,l=n||i||u;return"percentage"===c?(o>=100&&(o=100),l.forEach((function(e){return e.unitPrice=e.unitPrice-e.unitPrice*(o/100)}))):"amount"===c?o>=r?l.forEach((function(e){return e.unitPrice=0*e.unitPrice})):l.forEach((function(e){return e.unitPrice=e.unitPrice*(1-o/r*100/100)})):"product"===c&&(l=a),l}(e,c,u):[]},c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},o=function(e,t){var n=e.cartLineItems,i=(void 0===n?{}:n).lineItems,o=void 0===i?{}:i;o=function(e){return e.map((function(e){var t=e.originalUnitPrice;return t!==e.unitPrice?r(r({},e),{unitPrice:t}):e}))}(o);var a=function(e){switch(e.buyOfferType){case"threshold":return u(e);case"collection":break;default:return[]}return[]}(c(c({},t),{lineItems:o}));return JSON.stringify(a)};vajroPlugin=t})();
//# sourceMappingURL=vajroPlugin.js.map