var vajroPlugin;(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{getBuyXGetY:()=>o});var r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},r.apply(this,arguments)},n=function(t){return t.reduce((function(t,e){var n,u=e.variantId;return r(r({},t),((n={})[u]=e,n))}),{})},u=function(t,e,r){var n=[];return"include"===r?Object.keys(t).forEach((function(r){e[r]&&n.push(t[r])})):"exclude"===r&&Object.keys(t).forEach((function(r){e[r]||n.push(t[r])})),n},i=function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t},i.apply(this,arguments)},o=function(t,e){var o=t.cartLineItems,c=(void 0===o?{}:o).lineItems,a=void 0===c?{}:c,d=e.getOfferType;a="product"!==d?function(t){return t.map((function(t){var e=t.originalUnitPrice,n=t.unitPrice;return e&&e!==n?r(r({},t),{unitPrice:e}):t}))}(a):a;var f="product"===d?function(t){return t.filter((function(t){var e=t.unitPrice,r=t.lineItemType;return 0===e&&"READONLY"===r}))}(a):void 0,l=function(t){switch(t.buyOfferType){case"threshold":return function(t){var e=t.getOfferConfig,r=t.getOfferType,i=t.getRemovedProductList,o=function(t){var e=function(t){return t.reduce((function(t,e){return t[e.variantId]=e,t}),{})}(t.lineItems),r=n(t.includeProducts),i=n(t.excludeProducts),o=0!==Object.keys(r).length?u(e,r,"include"):[],c=0!==Object.keys(i).length?u(e,i,"exclude"):[];t.includedProductLineItem=0!==o.length?o:void 0,t.excludedProductLineItem=0===o.length&&0!==c.length?c:void 0;var a=o.length?o:c,d=0!==a.length?a:t.lineItems,f=0;return d.forEach((function(t){var e=t.unitPrice,r=t.quantity;f+=e*r})),f}(t),c=function(t,e){var r=(t=t.sort((function(t,e){return t.threshold-e.threshold}))).reduce((function(t,r){return r.threshold<=Math.round(e)?t<r?t:r:t}),0);return 0!==r?r:[]}(e,o),a=0!==c.length?function(t,e,r){var n=t.includedProductLineItem,u=t.excludedProductLineItem,i=t.lineItems,o=t.getOfferType,c=e.discount,a=e.getProducts,d=e.productQuantity,f=n||u||i;return"percentage"===o?(c>=100&&(c=100),f.forEach((function(t){return t.unitPrice=t.unitPrice-t.unitPrice*(c/100)}))):"amount"===o?c>=r?f.forEach((function(t){return t.unitPrice=0*t.unitPrice})):f.forEach((function(t){return t.unitPrice=t.unitPrice*(1-c/r*100/100)})):"product"===o&&(f=a.map((function(t){return t.quantity=d,t}))),f}(t,c,o):[];return"product"===r?{getSplitDiscount:a,getRemovedProductList:i}:{getSplitDiscount:a}}(t);case"collection":break;default:return[]}return[]}(i(i({},e),{lineItems:a,getRemovedProductList:f}));return JSON.stringify(l)};vajroPlugin=e})();
//# sourceMappingURL=vajroPlugin.js.map