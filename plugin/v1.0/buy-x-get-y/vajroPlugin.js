var vajroPlugin;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{getBuyXGetY:()=>o});var r=function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},r.apply(this,arguments)},n=function(e){return e.reduce((function(e,t){var n,u=t.variantId;return r(r({},e),((n={})[u]=t,n))}),{})},u=function(e,t,r){var n=[];return"include"===r?Object.keys(e).forEach((function(r){t[r]&&n.push(e[r])})):"exclude"===r&&Object.keys(e).forEach((function(r){t[r]||n.push(e[r])})),n},i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},i.apply(this,arguments)},o=function(e,t){var o=e.cartLineItems,c=(void 0===o?{}:o).lineItems,f=function(e){switch(e.buyOfferType){case"threshold":return function(e){var t=e.getOfferConfig,r=e.getOfferType,i=e.getRemovedProductList,o=function(e){var t=function(e){return e.reduce((function(e,t){return e[t.variantId]=t,e}),{})}(e.lineItems),r=n(e.includeProducts),i=n(e.excludeProducts),o=0!==Object.keys(r).length?u(t,r,"include"):[],c=0!==Object.keys(i).length?u(t,i,"exclude"):[];e.includedProductLineItem=0!==o.length?o:void 0,e.excludedProductLineItem=0===o.length&&0!==c.length?c:void 0;var f=o.length?o:c,a=0!==f.length?f:e.lineItems,d=0;return a.forEach((function(e){var t=e.unitPrice,r=e.quantity;d+=t*r})),d}(e),c=function(e,t){var r=(e=e.sort((function(e,t){return e.threshold-t.threshold}))).reduce((function(e,r){return r.threshold<=Math.round(t)?e<r?e:r:e}),0);return 0!==r?r:[]}(t,o),f=0!==c.length?function(e,t,r){var n=e.includedProductLineItem,u=e.excludedProductLineItem,i=e.lineItems,o=e.getOfferType,c=t.discount,f=t.getProducts,a=t.getProductQuantity,d=n||u||i;return"percentage"===o?(c>=100&&(c=100),d.forEach((function(e){return e.unitPrice=e.unitPrice-e.unitPrice*(c/100)}))):"amount"===o?c>=r?d.forEach((function(e){return e.unitPrice=0*e.unitPrice})):d.forEach((function(e){return e.unitPrice=e.unitPrice*(1-c/r*100/100)})):"product"===o&&(d=f.map((function(e){return e.quantity=a,e}))),d}(e,c,o):[];return"product"===r?{getSplitDiscount:f,getRemovedProductList:i}:{getSplitDiscount:f}}(e);case"collection":break;case"product":default:return{};case"quantity":return function(e){return e.getOfferConfig,e.getOfferType,e.getRemovedProductList,{}}(e)}return{}}(function(e,t){var n=e.buyOfferType,u=e.getOfferType;if("threshold"===n){t="product"!==u?function(e){return e.map((function(e){var t=e.originalUnitPrice,n=e.unitPrice;return t&&t!==n?r(r({},e),{unitPrice:t}):e}))}(t):t;var o="product"===u?function(e){return e.filter((function(e){var t=e.unitPrice,r=e.lineItemType;return 0===t&&"READONLY"===r}))}(t):void 0;return i(i({},e),{lineItems:t,getRemovedProductList:o})}return i(i({},e),{lineItems:t})}(t,void 0===c?{}:c));return JSON.stringify(f)};vajroPlugin=t})();
//# sourceMappingURL=vajroPlugin.js.map