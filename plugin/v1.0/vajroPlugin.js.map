{"version":3,"file":"vajroPlugin.js","mappings":"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","sources":["webpack://vajroPlugin/webpack/bootstrap","webpack://vajroPlugin/webpack/runtime/define property getters","webpack://vajroPlugin/webpack/runtime/hasOwnProperty shorthand","webpack://vajroPlugin/webpack/runtime/make namespace object","webpack://vajroPlugin/./src/utils/plugin.utils.ts","webpack://vajroPlugin/./src/service/offerApplies.core.ts","webpack://vajroPlugin/./src/utils/common.utils.ts","webpack://vajroPlugin/./src/controller/plugin.controller.ts","webpack://vajroPlugin/./src/service/discount.core.ts","webpack://vajroPlugin/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const combineSchemaInputArray = (data: any): Array<string> => {\n\tconst {\n\t\tofferCategory,\n\t\tcustomBuyCollection,\n\t\tcustomGetCollection,\n\t\tcustomBuyProduct,\n\t\tcustomGetProduct,\n\t\tgetProductCount\n\t} = data\n\n\tconst xValue =\n\t\tcustomBuyProduct.length > 0 || customBuyCollection.length > 0\n\t\t\t? customBuyProduct.concat(customBuyCollection)\n\t\t\t: []\n\n\tconst yValue =\n\t\tgetProductCount === 0 && (customGetProduct.length > 0 || customGetCollection.length > 0)\n\t\t\t? customGetProduct.concat(customGetCollection)\n\t\t\t: []\n\n\tconst combinedArray = offerCategory !== \"automaticOffers\" ? xValue.concat(yValue) : xValue\n\n\treturn combinedArray\n}\n\nexport const combineSchemaOfferArray = (data: any): Array<string> => {\n\tconst { customBuyCollection, customGetCollection, customBuyProduct, customGetProduct } = data\n\n\tconst xValue = customGetProduct.length > 0 ? customGetProduct : customBuyProduct\n\n\tconst yValue = customGetCollection.length > 0 ? customGetCollection : customBuyCollection\n\n\tconst buyAlternativeArray = customBuyProduct.length > 0 && customGetCollection.length > 0 ? customGetCollection : []\n\n\tconst getAlternativeArray = customGetProduct.length > 0 && customBuyCollection.length > 0 ? customGetProduct : []\n\n\tconst combinedArray =\n\t\tbuyAlternativeArray.length > 0 || getAlternativeArray.length > 0\n\t\t\t? buyAlternativeArray.concat(getAlternativeArray)\n\t\t\t: xValue.concat(yValue)\n\n\treturn combinedArray\n}\n\nexport const findOverAllCartTotal = (sanitizedLineItem: Array<any>): number => {\n\treturn sanitizedLineItem.reduce((acc: number, currentValue: any) => {\n\t\tconst { unitPrice, quantity } = currentValue\n\n\t\treturn (acc += unitPrice * quantity)\n\t}, 0)\n}\n\nexport const validateInputData = (data: any): boolean => {\n\tconst { cartType, cartValue, lineItems } = data\n\n\tconst getCombinedArray = combineSchemaInputArray(data)\n\n\tconst total = getCombinedArray.reduce((total: number, id: string) => {\n\t\tconst sum = lineItems.reduce((acc: number, lineItem: any) => {\n\t\t\tconst { collectionId, variantId, quantity, unitPrice } = lineItem || {}\n\n\t\t\tif (variantId === id || collectionId === id) {\n\t\t\t\tconst currentValue = cartType === \"amount\" ? quantity * unitPrice : quantity\n\n\t\t\t\tacc += currentValue\n\t\t\t}\n\n\t\t\treturn acc\n\t\t}, 0)\n\n\t\treturn (total += sum)\n\t}, 0)\n\n\treturn total >= cartValue\n}\n\nexport const validateOverAllData = (data: any): boolean => {\n\tconst { cartType, cartValue, lineItems } = data\n\n\tconst total = lineItems.reduce((acc: number, lineItem: any) => {\n\t\tconst { quantity, unitPrice } = lineItem\n\n\t\tconst currentValue = cartType === \"amount\" ? quantity * unitPrice : quantity\n\n\t\treturn (acc += currentValue)\n\t}, 0)\n\n\treturn total >= cartValue\n}\n\nexport const findFreeOfferOverAllCartValue = (data: any): boolean => {\n\tconst { cartType, cartValue, lineItems, customGetProduct } = data\n\n\tconst customLineItem = lineItems\n\n\tconst filteredGetProduct = customLineItem.filter(\n\t\t(obj: any) => !customGetProduct.some((id: string) => id === obj.variantId)\n\t)\n\n\tconst total = filteredGetProduct.reduce((acc: number, lineItem: any) => {\n\t\tconst { quantity, unitPrice } = lineItem\n\n\t\tconst currentValue = cartType === \"amount\" ? quantity * unitPrice : quantity\n\n\t\treturn (acc += currentValue)\n\t}, 0)\n\n\treturn total >= cartValue\n}\n\nexport const validateBuyArrayAvaliable = (data: any): boolean => {\n\tconst { customBuyProduct, customBuyCollection, lineItems } = data\n\n\tconst validationArray = customBuyProduct.concat(customBuyCollection)\n\n\treturn validationArray.some((id: any) => {\n\t\treturn lineItems.some((lineItem: any) => {\n\t\t\tconst { collectionId, variantId } = lineItem || {}\n\n\t\t\treturn variantId === id || collectionId === id\n\t\t})\n\t})\n}\n\nexport const validateGetArrayAvaliable = (data: any): boolean => {\n\tconst { customGetProduct, customGetCollection, lineItems } = data\n\n\tconst validationArray = customGetProduct.concat(customGetCollection)\n\n\treturn validationArray.some((id: any) => {\n\t\treturn lineItems.some((lineItem: any) => {\n\t\t\tconst { collectionId, variantId } = lineItem || {}\n\n\t\t\treturn variantId === id || collectionId === id\n\t\t})\n\t})\n}\n\nexport const validateGetProductCount = (data: any): boolean => {\n\tconst { customGetProduct, getProductCount, lineItems } = data\n\n\tconst quantity = customGetProduct.reduce((count: number, id: string) => {\n\t\tconst sum = lineItems.reduce((acc: number, lineItem: any) => {\n\t\t\tconst { collectionId, variantId, quantity } = lineItem || {}\n\n\t\t\tif (variantId === id || collectionId === id) acc += quantity\n\n\t\t\treturn acc\n\t\t}, 0)\n\n\t\treturn (count += sum)\n\t}, 0)\n\n\treturn quantity >= getProductCount\n}\n\nexport const findUserProductCartTotal = (sanitizedLineItem: Array<string>, lineItems: Array<any>): number => {\n\treturn sanitizedLineItem.reduce((total: number, key: string) => {\n\t\tconst sum = lineItems.reduce((acc: number, lineItem: any) => {\n\t\t\tconst { collectionId, variantId, quantity, unitPrice } = lineItem || {}\n\n\t\t\tif (variantId === key || collectionId === key) acc += quantity * unitPrice\n\n\t\t\treturn acc\n\t\t}, 0)\n\n\t\treturn (total += sum)\n\t}, 0)\n}\n","import { getLineItemsObj } from \"../utils/common.utils\"\nimport { combineSchemaOfferArray, findOverAllCartTotal, findUserProductCartTotal } from \"../utils/plugin.utils\"\n\nexport const applyPercentageAndAmountOffer = (\n\tofferCategory: string,\n\tlineItem: any,\n\tdiscountType: string,\n\tdiscountValue: number,\n\tpercentageDiscountValue: number,\n\tcartTotal: number,\n\tgetProductCount: number\n): object => {\n\tconst { unitPrice, quantity, variantId, productId, lineItemHandle } = lineItem || {}\n\n\tif (discountType === \"percentage\") {\n\t\tconst getEditedPrice = quantity * unitPrice - quantity * unitPrice * (percentageDiscountValue / 100)\n\n\t\tconst finalDiscount = {\n\t\t\tproductId,\n\t\t\tvariantId,\n\t\t\tquantity: quantity,\n\t\t\tunitPrice: getEditedPrice / quantity,\n\t\t\tlineItemHandle,\n\t\t\tdiscountType: offerCategory,\n\t\t\tdiscountValue: `You got ${percentageDiscountValue}% off`,\n\t\t\tcustomLineItemType: \"REGULAR\"\n\t\t}\n\t\treturn finalDiscount\n\t}\n\n\tif (discountType === \"amount\") {\n\t\tconst getPercentage = ((quantity * unitPrice) / cartTotal) * 100\n\n\t\tconst getPercentageAmount = (getPercentage / 100) * discountValue\n\n\t\tconst getEditedPrice =\n\t\t\tquantity * unitPrice >= getPercentageAmount ? quantity * unitPrice - getPercentageAmount : 0\n\n\t\tconst finalAmount = getEditedPrice !== 0 ? getEditedPrice / quantity : 0\n\n\t\tconst finalDiscount = {\n\t\t\tproductId,\n\t\t\tvariantId,\n\t\t\tquantity: quantity,\n\t\t\tunitPrice: finalAmount,\n\t\t\tlineItemHandle,\n\t\t\tdiscountType: offerCategory,\n\t\t\tdiscountValue: `You save {{currency}}${getPercentageAmount.toFixed(3)}`,\n\t\t\tcustomLineItemType: \"REGULAR\"\n\t\t}\n\n\t\treturn finalDiscount\n\t}\n\n\treturn {}\n}\n\nexport const applyBuyXGetYDiscount = (data: any): any => {\n\tconst { offerCategory, getProducts = [], customGetProduct, lineItems, getProductCount } = data\n\n\tconst sanitizedLineItem = getLineItemsObj(lineItems)\n\n\tconst filterGetProduct = customGetProduct.filter((id: any) => sanitizedLineItem[id])\n\n\tconst sortFilteredArray = filterGetProduct.sort(\n\t\t(start: any, next: any) => sanitizedLineItem[start].unitPrice - sanitizedLineItem[next].unitPrice\n\t)\n\n\tconst offerArray: object[] = []\n\n\tlet localProductCountTrack = getProductCount\n\n\tsortFilteredArray.forEach((id: any, index: number) => {\n\t\tif (localProductCountTrack) {\n\t\t\tconst isGetProductIdInLineitem = sanitizedLineItem[id] ? true : false\n\n\t\t\tconst { productId, variantId, quantity, unitPrice, lineItemHandle } = sanitizedLineItem[id] || {}\n\n\t\t\tconst customFreeQuantity = localProductCountTrack > quantity ? quantity : localProductCountTrack\n\n\t\t\tlocalProductCountTrack -= quantity\n\n\t\t\tif (localProductCountTrack < 0) localProductCountTrack = 0\n\n\t\t\tconst getFreeOfferValue = applyFreeDiscount({\n\t\t\t\tproductId,\n\t\t\t\tvariantId,\n\t\t\t\tlineItemHandle,\n\t\t\t\tquantity,\n\t\t\t\tgetProductCount: customFreeQuantity,\n\t\t\t\tunitPrice,\n\t\t\t\tofferCategory,\n\t\t\t\tcustomGetProductId: getProducts[index]?.productId,\n\t\t\t\tcustomGetVariantId: getProducts[index]?.variantId,\n\t\t\t\tisGetProductIdInLineitem\n\t\t\t})\n\n\t\t\tofferArray.push(getFreeOfferValue)\n\t\t}\n\t})\n\n\treturn offerArray\n}\n\nexport const applyPercentageAndAmountDiscount = (data: any): any => {\n\tconst { offerCategory, buyOfferType, discountType, discountValue } = data\n\n\tconst { getProductCount, lineItems, customGetProduct, customGetCollection } = data\n\n\tconst getCombinedArray = combineSchemaOfferArray(data)\n\n\tconst sanitizedLineItem =\n\t\tbuyOfferType === \"overAll\" && customGetProduct.length <= 0 && customGetCollection.length <= 0\n\t\t\t? lineItems\n\t\t\t: getCombinedArray\n\n\tconst cartTotal =\n\t\tbuyOfferType === \"overAll\"\n\t\t\t? findOverAllCartTotal(sanitizedLineItem)\n\t\t\t: findUserProductCartTotal(sanitizedLineItem, lineItems)\n\n\tconst percentageDiscountValue = discountType === \"percentage\" && discountValue >= 100 ? 100 : discountValue\n\n\tconst getOffer: object[] = []\n\n\tsanitizedLineItem.forEach((key: any) => {\n\t\tif (key && typeof key === \"string\") {\n\t\t\tlineItems.forEach((lineItem: any) => {\n\t\t\t\tconst { collectionId, variantId } = lineItem || {}\n\n\t\t\t\tif (variantId === key || collectionId === key) {\n\t\t\t\t\tconst value = applyPercentageAndAmountOffer(\n\t\t\t\t\t\tofferCategory,\n\t\t\t\t\t\tlineItem,\n\t\t\t\t\t\tdiscountType,\n\t\t\t\t\t\tdiscountValue,\n\t\t\t\t\t\tpercentageDiscountValue,\n\t\t\t\t\t\tcartTotal,\n\t\t\t\t\t\tgetProductCount\n\t\t\t\t\t)\n\n\t\t\t\t\tgetOffer.push(value)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tconst value = applyPercentageAndAmountOffer(\n\t\t\tofferCategory,\n\t\t\tkey,\n\t\t\tdiscountType,\n\t\t\tdiscountValue,\n\t\t\tpercentageDiscountValue,\n\t\t\tcartTotal,\n\t\t\tgetProductCount\n\t\t)\n\n\t\tgetOffer.push(value)\n\t})\n\n\treturn getOffer\n}\n\nexport const applyFreeDiscount = (data: any): object => {\n\tconst { offerCategory, getProductCount, customGetProductId, customGetVariantId, isGetProductIdInLineitem } = data\n\n\tconst { productId, variantId, lineItemHandle, quantity = getProductCount, unitPrice } = data\n\n\tconst customFreeQuantity = isGetProductIdInLineitem && getProductCount > quantity ? getProductCount : quantity\n\n\tconst customUnitPrice = customFreeQuantity === getProductCount ? 0 : unitPrice\n\n\tconst customDiscountType = customFreeQuantity >= getProductCount ? offerCategory : \"\"\n\n\tconst customDiscountValue =\n\t\tcustomFreeQuantity >= getProductCount\n\t\t\t? `Buy ${customFreeQuantity}, Get ${getProductCount} Free and ${\n\t\t\t\t\tcustomFreeQuantity - getProductCount\n\t\t\t  } For the Same Price.`\n\t\t\t: \"\"\n\n\tconst offerValue = {\n\t\tproductId: productId || customGetProductId,\n\t\tvariantId: variantId || customGetVariantId,\n\t\tquantity: customFreeQuantity,\n\t\tfreeQuantity: getProductCount,\n\t\tunitPrice: customUnitPrice,\n\t\tlineItemHandle,\n\t\tdiscountType: customDiscountType,\n\t\tdiscountValue: customDiscountValue,\n\t\tcustomLineItemType: \"REGULAR\",\n\t\tisGetProductIdInLineitem\n\t}\n\n\treturn offerValue\n}\n","export const schemaReBuilder = (configSchema: any): object => {\n\tconst {\n\t\tbuyCollections = [],\n\t\tgetCollections = [],\n\t\tbuyProducts = [],\n\t\tgetProducts = [],\n\t\tgetProductCount\n\t} = configSchema\n\n\tconst buyVariantIdList = buyProducts.map((product: any) => product.variantId)\n\n\tconfigSchema.customBuyProduct = buyVariantIdList\n\n\tconst getVariantIdList = getProducts.map((product: any) => product.variantId)\n\n\tconfigSchema.customGetProduct = getVariantIdList\n\n\tconst buyCollectionIdList = buyCollections.map((collection: any) => collection.collectionId)\n\n\tconfigSchema.customBuyCollection = buyCollectionIdList\n\n\tconst getCollectionIdList = getCollections.map((collection: any) => collection.collectionId)\n\n\tconfigSchema.customGetCollection = getCollectionIdList\n\n\tif (!getProductCount) configSchema.getProductCount = 0\n\n\treturn configSchema\n}\n\nexport const buildInputData = (getConfigSchema: object | any, lineItems: Array<any>): object => {\n\tconst { discountType, customGetProduct } = getConfigSchema\n\n\tconst getRemovedProductList = removeExistingDiscount(lineItems, discountType, customGetProduct) || []\n\n\tconst modifiedLineItem = resetInputLineItem(lineItems)\n\n\tconst config = { ...getConfigSchema, lineItems: modifiedLineItem, getRemovedProductList }\n\n\treturn config\n}\n\nexport const resetInputLineItem = (lineItems: Array<any>): Array<any> => {\n\tconst modifiedLineItem = lineItems.map((lineItem: any) => {\n\t\tconst { originalUnitPrice } = lineItem\n\n\t\tlineItem.unitPrice = originalUnitPrice\n\n\t\treturn lineItem\n\t})\n\n\treturn modifiedLineItem\n}\n\nexport const removeExistingDiscount = (\n\tlineItems: Array<any>,\n\tdiscountType: string,\n\tcustomGetProduct: Array<string>\n): Array<any> => {\n\tconst getRemoveItemsList = lineItems\n\n\treturn getRemoveItemsList.filter((lineItem: any) => {\n\t\tconst { variantId, unitPrice, originalUnitPrice } = lineItem\n\n\t\tlineItem.unitPrice = originalUnitPrice\n\n\t\tif (discountType === \"free\") return customGetProduct.find((id: any) => id === variantId)\n\n\t\treturn unitPrice !== originalUnitPrice\n\t})\n}\n\nexport const getLineItemsObj = (lineItems: Array<any>): any => {\n\treturn lineItems.reduce((acc: any, lineItem: any) => {\n\t\tconst { variantId } = lineItem\n\n\t\tacc[variantId] = lineItem\n\n\t\treturn acc\n\t}, {})\n}\n","import { findPercentageAmountDiscounts, findBuyXGetYDiscounts, findAutomaticDiscounts } from \"../service/discount.core\"\n\nexport const findOfferCategory = (data: any): object => {\n\tconst { offerCategory } = data\n\n\tswitch (offerCategory) {\n\t\tcase \"percentageDiscount\":\n\t\t\treturn findPercentageAmountDiscounts(data)\n\n\t\tcase \"flatDiscount\":\n\t\t\treturn findPercentageAmountDiscounts(data)\n\n\t\tcase \"buyXGetY\":\n\t\t\treturn findBuyXGetYDiscounts(data)\n\n\t\tcase \"automaticOffers\":\n\t\t\treturn findAutomaticDiscounts(data)\n\n\t\tdefault:\n\t\t\treturn {}\n\t}\n}\n","import { applyPercentageAndAmountDiscount, applyBuyXGetYDiscount } from \"./offerApplies.core\"\nimport {\n\tvalidateInputData,\n\tvalidateOverAllData,\n\tvalidateGetProductCount,\n\tvalidateBuyArrayAvaliable,\n\tvalidateGetArrayAvaliable,\n\tfindFreeOfferOverAllCartValue\n} from \"../utils/plugin.utils\"\n\nexport const findPercentageAmountDiscounts = (data: any): object => {\n\tconst { getRemovedProductList, buyOfferType, customGetProduct, customGetCollection, displayText } = data\n\n\tconst isValidInput = buyOfferType !== \"overAll\" ? validateInputData(data) : false\n\n\tconst buyArrayAvaliable =\n\t\tbuyOfferType !== \"overAll\" && (customGetProduct.length > 0 || customGetCollection.length > 0)\n\t\t\t? validateBuyArrayAvaliable(data)\n\t\t\t: true\n\n\tconst getArrayAvaliable =\n\t\tbuyOfferType !== \"overAll\" && (customGetProduct.length > 0 || customGetCollection.length > 0)\n\t\t\t? validateGetArrayAvaliable(data)\n\t\t\t: true\n\n\tconst isOverAllGetLevelValid =\n\t\tbuyOfferType === \"overAll\" && (customGetProduct.length > 0 || customGetCollection.length > 0)\n\t\t\t? validateGetArrayAvaliable(data)\n\t\t\t: true\n\n\tconst isOverAllValid = buyOfferType === \"overAll\" && isOverAllGetLevelValid ? validateOverAllData(data) : false\n\n\tconst getDiscoutOffer =\n\t\t(isOverAllValid || isValidInput) && buyArrayAvaliable && getArrayAvaliable\n\t\t\t? applyPercentageAndAmountDiscount(data)\n\t\t\t: []\n\n\tconst displayTextHtmlBuilder = getDiscoutOffer.length > 0 && displayText.length > 0 ? displayText : \"\"\n\n\treturn { output: getDiscoutOffer, getRemovedProductList, displayText: displayTextHtmlBuilder }\n}\n\nexport const findBuyXGetYDiscounts = (data: any): object => {\n\tconst { getRemovedProductList, buyOfferType, displayText } = data\n\n\tconst isValidInput = buyOfferType !== \"overAll\" ? validateInputData(data) : findFreeOfferOverAllCartValue(data)\n\n\tconst isGetProductValid = validateGetProductCount(data)\n\n\tconst getDiscoutOffer = isValidInput && isGetProductValid ? applyBuyXGetYDiscount(data) : []\n\n\tconst displayTextHtmlBuilder = getDiscoutOffer.length > 0 && displayText.length > 0 ? displayText : \"\"\n\n\treturn { output: getDiscoutOffer, getRemovedProductList, displayText: displayTextHtmlBuilder }\n}\n\nexport const findAutomaticDiscounts = (data: any): object => {\n\tconst { getRemovedProductList, buyOfferType, displayText } = data\n\n\tconst isValidInput = buyOfferType !== \"overAll\" ? validateInputData(data) : findFreeOfferOverAllCartValue(data)\n\n\tconst getDiscoutOffer = isValidInput ? applyBuyXGetYDiscount(data) : []\n\n\tconst displayTextHtmlBuilder = getDiscoutOffer.length > 0 && displayText.length > 0 ? displayText : \"\"\n\n\treturn { output: getDiscoutOffer, getRemovedProductList, displayText: displayTextHtmlBuilder }\n}\n","import { findOfferCategory } from \"./controller/plugin.controller\"\nimport { buildInputData, schemaReBuilder } from \"./utils/common.utils\"\n\nexport const showMessage = (message: any) => {\n\treturn message\n}\n\nexport const flow = (appContext: object | any, configSchema: object): string => {\n\tconst { cartLineItems = {} } = appContext\n\n\tconst { lineItems = [] } = cartLineItems\n\n\tif (lineItems.length === 0) return JSON.stringify({ output: [], getRemovedProductList: [], displayText: \"\" })\n\n\tconst getConfigSchema = schemaReBuilder(configSchema)\n\n\tconst getBuildInputData = buildInputData(getConfigSchema, lineItems)\n\n\tconst getOfferCategory = findOfferCategory(getBuildInputData)\n\n\treturn JSON.stringify(getOfferCategory)\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","validateInputData","data","cartType","cartValue","lineItems","getCombinedArray","offerCategory","customBuyCollection","customGetCollection","customBuyProduct","customGetProduct","getProductCount","xValue","length","concat","yValue","combineSchemaInputArray","reduce","total","id","acc","lineItem","collectionId","variantId","quantity","unitPrice","findFreeOfferOverAllCartValue","filter","some","validateGetArrayAvaliable","applyPercentageAndAmountOffer","discountType","discountValue","percentageDiscountValue","cartTotal","productId","lineItemHandle","getEditedPrice","customLineItemType","getPercentageAmount","toFixed","applyBuyXGetYDiscount","getProducts","sanitizedLineItem","getLineItemsObj","sortFilteredArray","sort","start","next","offerArray","localProductCountTrack","forEach","index","isGetProductIdInLineitem","customFreeQuantity","getFreeOfferValue","applyFreeDiscount","customGetProductId","customGetVariantId","push","freeQuantity","findOfferCategory","getRemovedProductList","buyOfferType","displayText","isValidInput","buyArrayAvaliable","validateBuyArrayAvaliable","getArrayAvaliable","isOverAllGetLevelValid","isOverAllValid","validateOverAllData","getDiscoutOffer","buyAlternativeArray","getAlternativeArray","combineSchemaOfferArray","currentValue","findOverAllCartTotal","findUserProductCartTotal","getOffer","applyPercentageAndAmountDiscount","output","findPercentageAmountDiscounts","isGetProductValid","count","validateGetProductCount","findBuyXGetYDiscounts","findAutomaticDiscounts","showMessage","message","flow","appContext","configSchema","JSON","stringify","getConfigSchema","buyCollections","getCollections","buyProducts","buyVariantIdList","map","product","getVariantIdList","buyCollectionIdList","collection","getCollectionIdList","schemaReBuilder","getBuildInputData","originalUnitPrice","find","removeExistingDiscount","modifiedLineItem","resetInputLineItem","buildInputData","getOfferCategory"],"sourceRoot":""}